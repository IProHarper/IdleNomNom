<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Idle Nom Nom</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="mobile.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script type="module" src="./scripts/main.js"></script>
    <script type="module" src="./scripts/buttonHandling.js"></script>
</head>
<body>
    <!-- Modal  -->
    <div id="popUpModal" class="modal" style="display:none;">
        <div class="modal-container">
            <span class="closeBttn">&times;</span>
            <h2>Welcome to Nomscension!</h2>
            <p>You've unlocked Nomscension! This means you can reset all your progress in exchange for some Nom Coins!</p>
            <p>Nom Coins can be used to buy upgrades that will help you get to your next Nomscension a LOT quicker.
            Checkout the Nom button in the top right to see what you might want before you Nomscend.</p>
            <p>It's recommended to have at least <span style="color:blue; font-weight: bold;">10</span> coins before your first reset!</p>
            <p style="text-align:center">Nom coins required: <span id="nomsecReqText" style="color:blue">5</span></p>
            <p style="text-align: center;">By Nomscending now, you'll get</p>
            <div class="nomCoinDisplay">
                <span id="nomCoinGainsText" style="color:blue">1</span>
                <img class="resourceImg" src="./assets/images/NomCoin.png" alt="Nom coins">
            </div>
            <br>
            <button id="nomscendBttn">NOMSCEND</button>
        </div>
    </div>

    <div id="patchModal" class="modal" style="display:none;">
        <div class="modal-container">
            <span class="closeBttn">&times;</span>
            <h2>Whoops!</h2>
            <p>Looks like you were playing on an old version. Due to a massive overhaul of the game. You will unfortunately need to reset all your progress...</p>
            <br>
            <button id="resetProgressModal">RESET</button>
        </div>
    </div>
    <div id="optionsModal" class="modal" style="display:none;">
        <div class="modal-container">
            <span class="closeBttn">&times;</span>
            <h2 style="text-decoration: underline;">Options</h2>
            <br>
            <button id="toggleDrawDots" class="on">Draw Dots</button>
            <button id="toggleDrawSquares" class="on">Draw Squares</button>
            <button id="toggleDrawTriangles" class="on">Draw Triangles</button>
            <br>
            <button id="toggleDrawDotsText" class="on">Draw Dots Text</button>
            <button id="toggleDrawSquaresText" class="on">Draw Squares Text</button>
            <button id="toggleDrawTriangleText" class="on">Draw Triangle Text</button>
            <br>
            <button id="toggleRoboNoms" class="on">Draw RoboNoms</button>
        </div>
    </div>


    <!-- <audio id="eatDot-audio" src="./assets/audio/dotEat.wav" preload="auto"></audio> -->
    <h1 style="text-decoration: underline;">IDLE NOM NOM</h1>
    
    <button id="debugBttn">Debug</button>
    <button id="ResetBttn">Reset</button>
    <button id="SaveBttn">Save</button>
    <button id="OptionsBttn">Options</button>
    <div id="resource-container" class="resources">
        <span class="resource-item">
            <div class="icon-dot"></div>
            <div id="activeDots" class="resource-amount">0/0</div>
        </span>
        <span class="resource-item">
            <div class="icon-dot"></div>
            <div id="score" class="resource-amount">0</div>
        </span>
        <span id="activeSquareDisplay" class="resource-item" style="display:none;">
            <div class="icon-square"></div>
            <div id="activeSquares" class="resource-amount">0/0</div>
        </span>
        <span id="squareDisplay" class="resource-item" style="display:none">
            <div class="icon-square"></div>
            <div id="squares" class="resource-amount">0</div>
        </span>
        <div  class="resource-item">
            <img class="resourceImg" src="./assets/images/NomCoin.png" alt="Nom coins">
            <div id="nomCoinStatText" style="color:#33ecff">1</div>
            <!-- (+<span id="nomCoinGainText" style="color:#33ecff">1</span>) -->
        </div>
        
    </div>

    <!-- GAME CANVAS -->
    <canvas id="gameCanvas"></canvas>

    <div>
        <button id="feedNomNom">FEEEEEED</button>
        <button id="nomscensionBttn">NOMSCENSION</button>
    </div>    
    
    <!-- Menu Bar -->
    <div id="menu-right">
        <button id="toggleUpgrades" class="menu-toggle-btn active">
            <div class="icon-dot"></div>
            Dots
        </button>

        <button id="toggleNomUpgrades" class="menu-toggle-btn">
            <img class="buttonImg" style="width: 1em;height:1em;"src="./assets/images/NomCoin.png" alt="Nom">
            Nom
        </button>

        <button id="toggleSquareUpgrades" class="menu-toggle-btn" style="display:none;">
            <div class="icon-square"></div>
            Square
        </button>
    </div>
    <div id="menu-left">
        <button id="toggleStats" class="menu-toggle-btn active">
            <span style="width: 1em;height:1em;">üìä</span>
            Stats
        </button>

        <button id="toggleCustomize" class="menu-toggle-btn">
            <span style="width: 1em;height:1em;">üé®</span>
            Customize
        </button>
    </div>
    <div id="tooltip" class="upgrade-tooltip"></div>

    <!-- Display the upgrades -->
    <div id="baseUpgrades" class="upgrades-container-right">
        <h2>Upgrades</h2>
        <div class="upgrades-grid">
            <!-- upgradeDotValue -->
            <div class="upgrade-card">
                <div class="upgrade-header">
                    <span class="upgrade-icon">üìà</span>
                    <!-- <span id="upgradeDotValue-i" class="upgrade-i">I</span> -->
                    <div class="upgrade-info">
                        <h3 class="upgrade-name">Dot Base Value</h3>            
                        <p class="upgrade-description" id="upgradeDotValueDesc">Increases Dot Value</p>
                        <span id="upgradeDotValueLvl" class="upgrade-level">0</span>
                    </div>
                </div>
                <div class="upgrade-actions">
                    <button id="upgradeDotValue" class="upgradeBttn">Cost: 100</button>
                    <button class="maxBttn" id="upgradeDotValueMaxBttn">Max</button>
                </div>
            </div>
            <!-- upgradeDotMulti -->
            <div class="upgrade-card">
                <div class="upgrade-header">
                    <span class="upgrade-icon">‚ùé</span>
                    <div class="upgrade-info">
                        <h3 class="upgrade-name">Dot Multiplier x</h3>
                        <p class="upgrade-description" id="upgradeDotMultiDesc">Desc</p>
                        <span id="upgradeDotMultiLvl" class="upgrade-level">Level: 0</span>
                    </div>
                </div>
                <div class="upgrade-actions">
                    <button id="upgradeDotMulti" class="upgradeBttn">Cost: 1000</button>
                    <button class="maxBttn" id="upgradeDotMultiMaxBttn">Max</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- RIGHT main options -->
        <!-- Display the NomscendUpgrades items -->
        <div id="nomUpgrades" class="upgrades-container-right" class="hidden">
        <h2>Base Upgrades</h2>
            <div class="upgrades-grid">
                <!-- upgradeNomDotVal -->
                <div class="upgrade-card">
                    <div class="upgrade-header">
                        <!-- <button class="minmax-button">-</button> -->
                        <span class="upgrade-icon"></span>
                        <div class="upgrade-info">
                            <h3 class="upgrade-name">Dot Base Value</h3>
                            <p class="upgrade-description" id="upgradeNomDotValDesc">Desc</p>
                            <span id="upgradeNomDotValLvl" class="upgrade-level">Level: 0</span>
                        </div>
                    </div>
                    <div class="upgrade-actions">
                        <button id="upgradeNomDotVal" class="upgradeBttn">
                            <img src="./assets/images/NomCoin.png"class="icon-nomCoin">
                            <span class="cost-text">0</span>
                        </button>
                        <button class="maxBttn" id="upgradeNomDotValMaxBttn">Max</button>
                    </div>
                </div>
                <!-- upgradeNomCoinMulti -->
                <div class="upgrade-card">
                    <div class="upgrade-header">
                        <span class="upgrade-icon"></span>
                        <div class="upgrade-info">
                            <h3 class="upgrade-name">Nom Coin gain x2</h3>
                            <p class="upgrade-description" id="upgradeNomCoinMultiDesc">Desc</p>
                            <span id="upgradeNomCoinMultiLvl" class="upgrade-level">Level: 0</span>
                        </div>
                    </div>
                    <div class="upgrade-actions">
                        <button id="upgradeNomCoinMulti" class="upgradeBttn">
                            <img src="./assets/images/NomCoin.png"class="icon-nomCoin">
                            <span class="cost-text">0</span>
                        </button>
                        <button class="maxBttn" id="upgradeNomCoinMultiMaxBttn">Max</button>
                    </div>
                </div>
            <!-- Max levels -->
            <h2 style="color: var(--text-primary); margin: 10px 0; font-size: 20px;">Max Level +</h2>
                <!-- Dot Multi Max Level+ -->
                <div class="upgrade-card">
                    <div class="upgrade-header">
                        <span class="upgrade-icon"></span>
                        <div class="upgrade-info">
                            <h3 class="upgrade-name">Dot Multi Max Level+</h3>
                            <p class="upgrade-description" id="upgradeDotMultiMaxDesc">Desc</p>
                            <span id="upgradeDotMultiMaxLvl" class="upgrade-level">Level: 0</span>
                        </div>
                    </div>
                    <div class="upgrade-actions">
                        <button id="upgradeDotMultiMax" class="upgradeBttn">
                            <img src="./assets/images/NomCoin.png"class="icon-nomCoin">
                            <span class="cost-text">0</span>
                        </button>
                        <button class="maxBttn" id="upgradeDotMultiMaxMaxBttn">Max</button>
                    </div>
                </div>
                <!-- Dot Value Max Level+ -->
                <div class="upgrade-card">
                    <div class="upgrade-header">
                        <span class="upgrade-icon"></span>
                        <div class="upgrade-info">
                            <h3 class="upgrade-name">Dot Value Max Level+</h3>
                            <p class="upgrade-description" id="upgradeDotValMaxDesc">Desc</p>
                            <span id="upgradeDotValMaxLvl" class="upgrade-level">Level: 0</span>
                        </div>
                    </div>
                    <div class="upgrade-actions">
                        <button id="upgradeDotValMax" class="upgradeBttn">
                            <img src="./assets/images/NomCoin.png"class="icon-nomCoin">
                            <span class="cost-text">0</span>
                        </button>
                        <button class="maxBttn" id="upgradeDotValMaxMaxBttn">Max</button>
                    </div>
                </div>
                <!-- Misc Upgrades -->
            <h2 style="color: var(--text-primary); margin: 10px 0; font-size: 20px;">Misc</h2>
                <!-- Unlock Robo Nom -->
                <div class="upgrade-card">
                    <div class="upgrade-header">
                        <span class="upgrade-icon">ü§ñ</span>
                        <div class="upgrade-info">
                            <h3 class="upgrade-name">Unlock Robo-Noms</h3>
                            <p class="upgrade-description" id="unlockRoboNomsDesc">Desc</p>
                        </div>
                    </div>
                    <div class="upgrade-actions">
                        <button id="unlockRoboNoms" class="upgradeBttn">
                            <img src="./assets/images/NomCoin.png"class="icon-nomCoin">
                            <span class="cost-text">0</span>
                        </button>
                    </div>
                </div>
                <div class="upgrade-card">
                    <div class="upgrade-header">
                        <span class="upgrade-icon"><div class="icon-square"></div></span>
                        <div class="upgrade-info">
                            <h3 class="upgrade-name">Unlock Squares</h3>
                            <p class="upgrade-description" id="unlockSquareDesc">Desc</p>
                        </div>
                    </div>
                    <div class="upgrade-actions">
                        <button id="unlockSquare" class="upgradeBttn">
                            <img src="./assets/images/NomCoin.png"class="icon-nomCoin">
                            <span class="cost-text">0</span>
                        </button>
                    </div>
                </div>

                <!-- Score Boost from Nom Coins -->
                <!-- <div class="upgrade-card">
                    <div class="upgrade-header">
                        <span class="upgrade-icon"></span>
                        <div class="upgrade-info">
                            <h3 class="upgrade-name">Nom Coin Score Boost</h3>
                            <p class="upgrade-description" id="unlockNomCoinScoreBoostDesc">Desc</p>
                        </div>
                    </div>
                    <div class="upgrade-actions">
                        <button id="unlockNomCoinScoreBoost" class="upgradeBttn">
                            <img src="./assets/images/NomCoin.png"class="icon-nomCoin">
                            <span class="cost-text">0</span>
                        </button>
                    </div>
                </div> -->
            </div>
        </div>

        <!-- Square Upgrade panel -->
        <div id="squareUpgrades" class="upgrades-container-right" class="hidden">
            <h2>Square Upgrades</h2>
            <div class="upgrades-grid">
            </div>
        </div>
        
        <!-- CUSTOMIZE SECTION -->
        <div id="customize-container" class="upgrades-container-left">
            <h2 style="color: var(--text-primary); margin: 20px 0;">Customize</h2>
            <div class="upgrades-grid">
                <div class="upgrade-card">
                    <div class="upgrade-header">
                        <span class="upgrade-icon">üé®</span>
                        <div class="upgrade-info">
                            <h3 class="upgrade-name">DEFAULT Mode</h3>
                            <p class="upgrade-description">Classic look and feel</p>
                        </div>
                    </div>
                    <div class="upgrade-actions">
                        <button id="enableDefaultMode" class="buy-button" style="background: white;color:black;">FREE</button>
                    </div>
                </div>

                <div class="upgrade-card">
                    <div class="upgrade-header">
                        <span class="upgrade-icon">üé®</span>
                        <div class="upgrade-info">
                            <h3 class="upgrade-name">CILLIAN Mode</h3>
                            <p class="upgrade-description">I'm Blue Da Ba Dee</p>
                        </div>
                    </div>
                    <div class="upgrade-actions">
                        <button id="enableCillianMode" class="buy-button" style="background: blue;">FREE</button>
                    </div>
                </div>

                <div class="upgrade-card">
                    <div class="upgrade-header">
                        <span class="upgrade-icon">üé®</span>
                        <div class="upgrade-info">
                            <h3 class="upgrade-name">CONALL Mode</h3>
                            <p class="upgrade-description">Mr Pineapple</p>
                        </div>
                    </div>
                    <div class="upgrade-actions">
                        <button id="enableConallMode" class="buy-button" style="background: yellow;color:black">FREE</button>
                    </div>
                </div>

                <div class="upgrade-card">
                    <div class="upgrade-header">
                        <span class="upgrade-icon">üé®</span>
                        <div class="upgrade-info">
                            <h3 class="upgrade-name">AIDAN Mode</h3>
                            <p class="upgrade-description">NOW I'M ANGRY!</p>
                        </div>
                    </div>
                    <div class="upgrade-actions">
                        <button id="enableAidanMode" class="buy-button" style="background: red;">FREE</button>
                    </div> 
                </div>

                <div class="upgrade-card">
                    <div class="upgrade-header">
                        <span class="upgrade-icon">üé®</span>
                        <div class="upgrade-info">
                            <h3 class="upgrade-name">DAD Mode</h3>
                            <p class="upgrade-description">Just a Dad and missing his 3 sons</p>
                        </div>
                    </div>
                    <div class="upgrade-actions">
                        <button id="enableDADMode" class="buy-button" style="background: green;">FREE</button>
                    </div>
                </div>

                <div class="upgrade-card">
                    <div class="upgrade-header">
                        <span class="upgrade-icon">üé®</span>
                        <div class="upgrade-info">
                            <h3 class="upgrade-name">LACHLAN Mode</h3>
                            <p class="upgrade-description">Waruilachlan</p>
                        </div>
                    </div>
                    <div class="upgrade-actions">
                        <button id="enableLachlanMode" class="buy-button" style="background: purple;">FREE</button>
                    </div>
                </div>
                <div class="upgrade-card">
                    <div class="upgrade-header">
                        <span class="upgrade-icon">üé®</span>
                        <div class="upgrade-info">
                            <h3 class="upgrade-name">Rino Mode</h3>
                            <p class="upgrade-description">Wife mode</p>
                        </div>
                    </div>
                    <div class="upgrade-actions">
                        <button id="enableRinoMode" class="buy-button" style="background: rgb(255, 75, 165);">FREE</button>
                    </div>
                </div>
                <div class="upgrade-card">
                    <div class="upgrade-header">
                        <span class="upgrade-icon">üé®</span>
                        <div class="upgrade-info">
                            <h3 class="upgrade-name">Mi-chan Mode</h3>
                            <p class="upgrade-description">„Åø„Å°„ÇÉ„Çì</p>
                        </div>
                    </div>
                    <div class="upgrade-actions">
                        <button id="enableMichanMode" class="buy-button" style="background: orange;">FREE</button>
                    </div>
                </div>
                <div class="upgrade-card">
                    <div class="upgrade-header">
                        <span class="upgrade-icon">üé®</span>
                        <div class="upgrade-info">
                            <h3 class="upgrade-name">Kin-san Mode</h3>
                            <p class="upgrade-description">Èáë„Åï„Çì</p>
                        </div>
                    </div>
                    <div class="upgrade-actions">
                        <button id="enableKinsanMode" class="buy-button" style="background: grey;">FREE</button>
                    </div>
                </div>
            </div>
        </div>
        
         <!-- STATS SECTION -->
        <div id="stats-container" class="upgrades-container-left">
            <h2>Statistics</h2>
            <div class="upgrades-grid">
                <div class="upgrade-card">
                    <div class="upgrade-header">
                        <span class="upgrade-icon" class="icon-dot"></span>
                        <div class="upgrade-info">
                            <h3 class="stat-name">Dots</h3>
                        </div>
                    </div>
                    <div class="upgrade-stats">
                        <div style="width: 100%; display: flex; justify-content: space-between;">
                            <span class="stat-label">Base Value:</span>
                            <span class="stat-value" id="dotBaseValueText">0</span>
                        </div>
                        <div style="width: 100%; display: flex; justify-content: space-between;">
                            <span class="stat-label">Multiplier:</span>
                            <span class="stat-value" id="dotMultiText">0</span>
                        </div>
                        <div style="width: 100%; display: flex; justify-content: space-between;">
                            <span class="stat-label">Dot Award:</span>
                            <span class="stat-value" id="dotAwardText">0</span>
                        </div>
                        <div style="width: 100%; display: flex; justify-content: space-between;">
                            <span class="stat-label">Spawn Amount:</span>
                            <span class="stat-value" id="dotSpawnAmountText">0</span>
                        </div>
                        <div style="width: 100%; display: flex; justify-content: space-between;">
                            <span class="stat-label">Spawn Rate:</span>
                            <span class="stat-value" id="dotSpawnRateText">0</span>
                        </div>
                        <div style="width: 100%; display: flex; justify-content: space-between;">
                            <span class="stat-label">Max Spawn:</span>
                            <span class="stat-value" id="dotMaxSpawnText">0</span>
                        </div>
                    </div>
                        <div class="upgrade-stats">
                            <div style="width: 100%; display: flex; justify-content: space-between;">
                                <span class="stat-label">Lifetime Score:</span>
                                <span class="stat-value" id="lifetimeScoreText">0</span>
                            </div>
                            <div style="width: 100%; display: flex; justify-content: space-between;">
                                <span class="stat-label">Dots Eaten:</span>
                                <span class="stat-value" id="dotsEatenText">0</span>
                            </div>
                        </div>
                    </div>
                    <!-- Squares Stats -->
                    <div class="upgrade-card" id="squareStats" style="display:none;">
                        <div class="upgrade-header">
                            <span class="icon-square" style="margin-right: 10px;"></span>
                            <div class="upgrade-info">
                                <h3 class="stat-name">Squares</h3>
                            </div>
                        </div>
                    <div class="upgrade-stats">
                        <div style="width: 100%; display: flex; justify-content: space-between;">
                                <span class="stat-label">Base Value:</span>
                                <span class="stat-value" id="squareBaseValueText">0</span>
                            </div>
                            <div style="width: 100%; display: flex; justify-content: space-between;">
                                <span class="stat-label">Multiplier:</span>
                                <span class="stat-value" id="squareMultiText">0</span>
                            </div>
                            <div style="width: 100%; display: flex; justify-content: space-between;">
                                <span class="stat-label">Square Award:</span>
                                <span class="stat-value" id="squareAwardText">0</span>
                            </div>
                            <div style="width: 100%; display: flex; justify-content: space-between;">
                                <span class="stat-label">Spawn Amount:</span>
                                <span class="stat-value" id="squareSpawnAmountText">0</span>
                            </div>
                            <div style="width: 100%; display: flex; justify-content: space-between;">
                                <span class="stat-label">Spawn Rate:</span>
                                <span class="stat-value" id="squareSpawnRateText">0</span>
                            </div>
                            <div style="width: 100%; display: flex; justify-content: space-between;">
                                <span class="stat-label">Max Spawn:</span>
                                <span class="stat-value" id="squareMaxSpawnText">0</span>
                            </div>
                        </div>
                        <div class="upgrade-stats">
                            <div style="width: 100%; display: flex; justify-content: space-between;">
                                <span class="stat-label">Lifetime Squares:</span>
                                <span class="stat-value" id="lifetimeSquaresText">0</span>
                            </div>
                            <div style="width: 100%; display: flex; justify-content: space-between;">
                                <span class="stat-label">Squares Eaten:</span>
                                <span class="stat-value" id="squaresEatenText">0</span>
                            </div>
                        </div>
                    </div>
                    <div class="upgrade-card">
                        <div class="upgrade-header">
                            <span class="upgrade-icon">üìä</span>
                            <div class="upgrade-info">
                                <h3 class="stat-name">Nomscension</h3>
                            </div>
                        </div>
                        <div class="upgrade-stats">
                            <div style="width: 100%; display: flex; justify-content: space-between;">
                                <span class="stat-label">Nomscensions:</span>
                                <span class="stat-value" id="nomscensionCountText">0</span>
                            </div>
                            <div style="width: 100%; display: flex; justify-content: space-between;">
                                <span class="stat-label">Nom Coins:</span>
                                <span class="stat-value" id="nomCoinsText">0</span>
                            </div>
                            <div style="width: 100%; display: flex; justify-content: space-between;">
                                <span class="stat-label">Lifetime Nom Coins:</span>
                                <span class="stat-value" id="LifetimeNomCoinsText">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
         


        </div>
    </div>


<!-- Progress bar at the bottom -->
    <div class="progress-container">
        <div class="progress-bar">
            <div id="progress-text">Unlock Nomscension - 10,0000 (0%)</div>
        </div>
    </div>
<div id="savePopup">Game Saved!</div> 


<!-- Prestige overlay (hidden by default) -->
<div id="prestigeOverlay" class="prestige-overlay" role="dialog" tabindex="-1">
  <canvas id="prestigeCanvas"></canvas>

  <div class="prestige-content" role="document">
    <div class="prestige-inner">
      <h1 class="prestige-title">NOMSCENDED!</h1>
      <p class="prestige-sub" id="prestigeSubtitle">You reset for glory</p>
      <div class="prestige-gain">
        <span class="prestige-plus">+ </span>
        <span id="prestigeCounter" class="prestige-count">0</span>
        <span class="prestige-currency"><img class="resourceImg" src="./assets/images/NomCoin.png" alt="Nom coins"></span>
      </div>
    </div>
  </div>
</div>



</body>
</html>
